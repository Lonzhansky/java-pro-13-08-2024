
Легковаговик (Flyweight)
----------------------
ДОЗВОЛЯЄ вмістити більшу кількість об'єктів у відведену
оперативну пам'ять.
Легковаговик заощаджує пам'ять, розділяючи загальний стан
об'єктів між собою, замість зберігання однакових даних
у кожному об'єкті.

Шаблон НАМАГАЄТЬСЯ повторно використати вже існуючі об'єкти
аналогічного типу, зберігаючи їх, і створює новий об'єкт, коли
відповідного об'єкта не знайдено.


ЗАСТОСУВАННЯ Flyweight можливе при таких умовах:
 - Програма використовує велику кількість об’єктів.
 - Витрати на зберігання високі через величезну кількість об'єктів.
 - Більшу частину стану об’єкта можна зробити зовнішнім.
 - Багато груп об'єктів можуть бути замінені відносно невеликою
 кількістю спільних об'єктів після видалення зовнішнього стану.
 - Додаток не залежить від ідентичності об'єкта. Оскільки легковажні
 об’єкти можуть бути спільними.


Демо
------
В аптеці (Pharmacy) є полиці, повні ліків (Medicine)
різних типів.
Багато ліків однакові, тому немає потреби створювати
новий об’єкт для кожного з них.
Натомість один екземпляр об’єкта може представляти кілька
елементів полиці, тому обсяг пам’яті залишається невеликим.

Pharmacy має велику кількість ліків (Medicine) на полицях.
Щоб заповнити полиці Pharmacy, використовується MedicineFactory,
який тут є Flyweight. Всередині MedicineFactory зберігається
Map ліків та ліниво (за запитом) створюються нові.
Щоб забезпечити безпечний обмін між клієнтами та потоками,
об’єкти Flyweight мають бути незмінними.
Легковагові об’єкти за визначенням є об’єктами значень.

